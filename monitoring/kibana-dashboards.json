{
  "version": "8.0.0",
  "objects": [
    {
      "id": "whatsapp-saas-overview",
      "type": "dashboard",
      "attributes": {
        "title": "WhatsApp SaaS - Log Overview",
        "description": "Main dashboard for WhatsApp SaaS log analysis",
        "panelsJSON": "[{\"version\":\"8.0.0\",\"gridData\":{\"x\":0,\"y\":0,\"w\":24,\"h\":15},\"panelIndex\":\"1\",\"embeddableConfig\":{},\"panelRefName\":\"panel_1\"}]",
        "timeRestore": false,
        "version": 1
      }
    },
    {
      "id": "whatsapp-saas-errors",
      "type": "dashboard",
      "attributes": {
        "title": "WhatsApp SaaS - Error Analysis",
        "description": "Error tracking and analysis dashboard",
        "panelsJSON": "[{\"version\":\"8.0.0\",\"gridData\":{\"x\":0,\"y\":0,\"w\":48,\"h\":30},\"panelIndex\":\"1\",\"embeddableConfig\":{},\"panelRefName\":\"panel_1\"}]",
        "timeRestore": false,
        "version": 1
      }
    },
    {
      "id": "whatsapp-saas-performance",
      "type": "dashboard",
      "attributes": {
        "title": "WhatsApp SaaS - Performance Insights",
        "description": "Performance monitoring and analysis",
        "panelsJSON": "[{\"version\":\"8.0.0\",\"gridData\":{\"x\":0,\"y\":0,\"w\":48,\"h\":30},\"panelIndex\":\"1\",\"embeddableConfig\":{},\"panelRefName\":\"panel_1\"}]",
        "timeRestore": false,
        "version": 1
      }
    },
    {
      "id": "whatsapp-saas-security",
      "type": "dashboard",
      "attributes": {
        "title": "WhatsApp SaaS - Security Monitoring",
        "description": "Security events and threat detection",
        "panelsJSON": "[{\"version\":\"8.0.0\",\"gridData\":{\"x\":0,\"y\":0,\"w\":48,\"h\":30},\"panelIndex\":\"1\",\"embeddableConfig\":{},\"panelRefName\":\"panel_1\"}]",
        "timeRestore": false,
        "version": 1
      }
    }
  ],
  
  "visualizations": [
    {
      "id": "log-volume-timeline",
      "type": "visualization",
      "attributes": {
        "title": "Log Volume Timeline",
        "visState": {
          "title": "Log Volume Timeline",
          "type": "histogram",
          "params": {
            "grid": {"categoryLines": false, "style": {"color": "#eee"}},
            "categoryAxes": [{"id": "CategoryAxis-1", "type": "category", "position": "bottom", "show": true, "style": {}, "scale": {"type": "linear"}, "labels": {"show": true, "truncate": 100}, "title": {}}],
            "valueAxes": [{"id": "ValueAxis-1", "name": "LeftAxis-1", "type": "value", "position": "left", "show": true, "style": {}, "scale": {"type": "linear", "mode": "normal"}, "labels": {"show": true, "rotate": 0, "filter": false, "truncate": 100}, "title": {"text": "Count"}}],
            "seriesParams": [{"show": "true", "type": "histogram", "mode": "stacked", "data": {"label": "Count", "id": "1"}, "valueAxis": "ValueAxis-1", "drawLinesBetweenPoints": true, "showCircles": true}],
            "addTooltip": true,
            "addLegend": true,
            "legendPosition": "right",
            "times": [],
            "addTimeMarker": false
          },
          "aggs": [
            {"id": "1", "enabled": true, "type": "count", "schema": "metric", "params": {}},
            {"id": "2", "enabled": true, "type": "date_histogram", "schema": "segment", "params": {"field": "@timestamp", "interval": "auto", "customInterval": "2h", "min_doc_count": 1, "extended_bounds": {}}}
          ]
        },
        "uiStateJSON": "{}",
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"query\":{\"match_all\":{}},\"filter\":[]}"
        }
      }
    },
    
    {
      "id": "error-distribution",
      "type": "visualization",
      "attributes": {
        "title": "Error Distribution by Service",
        "visState": {
          "title": "Error Distribution by Service",
          "type": "pie",
          "params": {
            "addTooltip": true,
            "addLegend": true,
            "legendPosition": "right",
            "isDonut": true
          },
          "aggs": [
            {"id": "1", "enabled": true, "type": "count", "schema": "metric", "params": {}},
            {"id": "2", "enabled": true, "type": "terms", "schema": "segment", "params": {"field": "service", "size": 10, "order": "desc", "orderBy": "1"}}
          ]
        },
        "uiStateJSON": "{}",
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"query\":{\"bool\":{\"must\":[{\"term\":{\"level\":\"error\"}}]}},\"filter\":[]}"
        }
      }
    },
    
    {
      "id": "response-time-heatmap",
      "type": "visualization",
      "attributes": {
        "title": "Response Time Heatmap",
        "visState": {
          "title": "Response Time Heatmap",
          "type": "heatmap",
          "params": {
            "grid": {"strokeWidth": 1},
            "margin": {"top": 20, "right": 200, "bottom": 100, "left": 100},
            "legend": {"show": true, "pos": "right"},
            "tooltip": {"show": true},
            "heatmap": {"heatmapMaxBuckets": 50},
            "colorsNumber": 10,
            "colorSchema": "Reds",
            "setColorRange": false,
            "colorsRange": [],
            "invertColors": false,
            "labels": {"show": false, "rotate": 0, "color": "black"},
            "scale": {"type": "linear"},
            "drawLinesBetweenPoints": true,
            "radiusRatio": 50,
            "times": [],
            "valueAxes": []
          },
          "aggs": [
            {"id": "1", "enabled": true, "type": "avg", "schema": "metric", "params": {"field": "responseTime"}},
            {"id": "2", "enabled": true, "type": "date_histogram", "schema": "segment", "params": {"field": "@timestamp", "interval": "auto", "customInterval": "2h", "min_doc_count": 1, "extended_bounds": {}}},
            {"id": "3", "enabled": true, "type": "terms", "schema": "group", "params": {"field": "route", "size": 10, "order": "desc", "orderBy": "1"}}
          ]
        },
        "uiStateJSON": "{}",
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"query\":{\"bool\":{\"must\":[{\"term\":{\"log_type\":\"access\"}}]}},\"filter\":[]}"
        }
      }
    },
    
    {
      "id": "top-errors",
      "type": "visualization",
      "attributes": {
        "title": "Top Error Messages",
        "visState": {
          "title": "Top Error Messages",
          "type": "table",
          "params": {
            "perPage": 10,
            "showPartialRows": false,
            "showMeticsAtAllLevels": false,
            "sort": {"columnIndex": null, "direction": null},
            "showTotal": false,
            "totalFunc": "sum"
          },
          "aggs": [
            {"id": "1", "enabled": true, "type": "count", "schema": "metric", "params": {}},
            {"id": "2", "enabled": true, "type": "terms", "schema": "bucket", "params": {"field": "message.keyword", "size": 20, "order": "desc", "orderBy": "1"}},
            {"id": "3", "enabled": true, "type": "terms", "schema": "bucket", "params": {"field": "service", "size": 5, "order": "desc", "orderBy": "1"}}
          ]
        },
        "uiStateJSON": "{}",
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"query\":{\"bool\":{\"must\":[{\"term\":{\"level\":\"error\"}}]}},\"filter\":[]}"
        }
      }
    },
    
    {
      "id": "geographic-distribution",
      "type": "visualization",
      "attributes": {
        "title": "Geographic Distribution of Requests",
        "visState": {
          "title": "Geographic Distribution of Requests",
          "type": "tile_map",
          "params": {
            "mapType": "Scaled Circle Markers",
            "isDesaturated": true,
            "addTooltip": true,
            "heatClusterSize": 1.5,
            "legendPosition": "bottomright",
            "mapZoom": 2,
            "mapCenter": [0, 0],
            "wms": {"enabled": false, "options": {"format": "image/png", "transparent": true}}
          },
          "aggs": [
            {"id": "1", "enabled": true, "type": "count", "schema": "metric", "params": {}},
            {"id": "2", "enabled": true, "type": "geohash_grid", "schema": "segment", "params": {"field": "geoip.location", "autoPrecision": true, "precision": 2}}
          ]
        },
        "uiStateJSON": "{\"mapZoom\":2,\"mapCenter\":[0,0]}",
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"query\":{\"bool\":{\"must\":[{\"exists\":{\"field\":\"geoip.location\"}}]}},\"filter\":[]}"
        }
      }
    },
    
    {
      "id": "security-events",
      "type": "visualization",
      "attributes": {
        "title": "Security Events Timeline",
        "visState": {
          "title": "Security Events Timeline",
          "type": "line",
          "params": {
            "grid": {"categoryLines": false, "style": {"color": "#eee"}},
            "categoryAxes": [{"id": "CategoryAxis-1", "type": "category", "position": "bottom", "show": true, "style": {}, "scale": {"type": "linear"}, "labels": {"show": true, "truncate": 100}, "title": {}}],
            "valueAxes": [{"id": "ValueAxis-1", "name": "LeftAxis-1", "type": "value", "position": "left", "show": true, "style": {}, "scale": {"type": "linear", "mode": "normal"}, "labels": {"show": true, "rotate": 0, "filter": false, "truncate": 100}, "title": {"text": "Count"}}],
            "seriesParams": [{"show": "true", "type": "line", "mode": "normal", "data": {"label": "Count", "id": "1"}, "valueAxis": "ValueAxis-1", "drawLinesBetweenPoints": true, "showCircles": true}],
            "addTooltip": true,
            "addLegend": true,
            "legendPosition": "right",
            "times": [],
            "addTimeMarker": false,
            "thresholdLine": {"show": false, "value": 10, "width": 1, "style": "full", "color": "#34130C"}
          },
          "aggs": [
            {"id": "1", "enabled": true, "type": "count", "schema": "metric", "params": {}},
            {"id": "2", "enabled": true, "type": "date_histogram", "schema": "segment", "params": {"field": "@timestamp", "interval": "auto", "customInterval": "2h", "min_doc_count": 1, "extended_bounds": {}}},
            {"id": "3", "enabled": true, "type": "terms", "schema": "group", "params": {"field": "security.alert_type", "size": 5, "order": "desc", "orderBy": "1"}}
          ]
        },
        "uiStateJSON": "{}",
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"query\":{\"bool\":{\"must\":[{\"exists\":{\"field\":\"security.alert_type\"}}]}},\"filter\":[]}"
        }
      }
    }
  ],
  
  "searches": [
    {
      "id": "recent-errors",
      "type": "search",
      "attributes": {
        "title": "Recent Errors",
        "description": "Recent error logs from all services",
        "hits": 0,
        "columns": ["@timestamp", "service", "level", "message", "error.message"],
        "sort": [["@timestamp", "desc"]],
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"highlightAll\":true,\"version\":true,\"query\":{\"bool\":{\"must\":[{\"term\":{\"level\":\"error\"}}]}},\"filter\":[]}"
        }
      }
    },
    
    {
      "id": "slow-requests",
      "type": "search",
      "attributes": {
        "title": "Slow Requests",
        "description": "HTTP requests with high response times",
        "hits": 0,
        "columns": ["@timestamp", "method", "url", "statusCode", "responseTime", "userAgent"],
        "sort": [["responseTime", "desc"]],
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"highlightAll\":true,\"version\":true,\"query\":{\"bool\":{\"must\":[{\"range\":{\"responseTime\":{\"gt\":1000}}}]}},\"filter\":[]}"
        }
      }
    },
    
    {
      "id": "business-metrics",
      "type": "search",
      "attributes": {
        "title": "Business Metrics",
        "description": "Business metric logs for analysis",
        "hits": 0,
        "columns": ["@timestamp", "business_metric.metric_name", "business_metric.value", "business_metric.unit", "service"],
        "sort": [["@timestamp", "desc"]],
        "kibanaSavedObjectMeta": {
          "searchSourceJSON": "{\"index\":\"whatsapp-saas-logs-*\",\"highlightAll\":true,\"version\":true,\"query\":{\"bool\":{\"must\":[{\"exists\":{\"field\":\"business_metric.metric_name\"}}]}},\"filter\":[]}"
        }
      }
    }
  ],
  
  "index_patterns": [
    {
      "id": "whatsapp-saas-logs-*",
      "type": "index-pattern",
      "attributes": {
        "title": "whatsapp-saas-logs-*",
        "timeFieldName": "@timestamp",
        "fields": "[{\"name\":\"@timestamp\",\"type\":\"date\",\"searchable\":true,\"aggregatable\":true},{\"name\":\"level\",\"type\":\"string\",\"searchable\":true,\"aggregatable\":true},{\"name\":\"message\",\"type\":\"string\",\"searchable\":true,\"aggregatable\":false},{\"name\":\"service\",\"type\":\"string\",\"searchable\":true,\"aggregatable\":true},{\"name\":\"environment\",\"type\":\"string\",\"searchable\":true,\"aggregatable\":true},{\"name\":\"responseTime\",\"type\":\"number\",\"searchable\":true,\"aggregatable\":true}]"
      }
    }
  ],
  
  "alerting_rules": [
    {
      "name": "High Error Rate Alert",
      "type": "logs_threshold",
      "params": {
        "criteria": [
          {
            "field": "level",
            "comparator": "equals",
            "value": "error"
          }
        ],
        "timeSize": 5,
        "timeUnit": "m",
        "threshold": {
          "value": 10,
          "comparator": "more than"
        }
      },
      "actions": [
        {
          "group": "logs.threshold.fired",
          "id": "slack-connector",
          "params": {
            "message": "High error rate detected: {{context.value}} errors in {{params.timeSize}}{{params.timeUnit}}"
          }
        }
      ]
    },
    
    {
      "name": "Security Event Alert",
      "type": "logs_threshold",
      "params": {
        "criteria": [
          {
            "field": "security.alert_type",
            "comparator": "exists"
          }
        ],
        "timeSize": 1,
        "timeUnit": "m",
        "threshold": {
          "value": 1,
          "comparator": "more than or equal"
        }
      },
      "actions": [
        {
          "group": "logs.threshold.fired",
          "id": "security-webhook",
          "params": {
            "body": "Security event detected: {{context.reason}}"
          }
        }
      ]
    }
  ]
}