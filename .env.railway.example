# Railway Production Environment Variables
# Copy this file and configure with your production values

# ============================================
# RAILWAY GENERATED (Automatic)
# ============================================
RAILWAY_ENVIRONMENT=production
RAILWAY_PROJECT_ID=your-project-id
RAILWAY_SERVICE_ID=your-service-id
RAILWAY_PUBLIC_DOMAIN=your-service.railway.app
RAILWAY_PRIVATE_DOMAIN=your-service.railway.internal

# ============================================
# DATABASE (Railway PostgreSQL Plugin)
# ============================================
DATABASE_URL=${{Postgres.DATABASE_URL}}
POSTGRES_URL=${{Postgres.POSTGRES_URL}}
POSTGRES_PRISMA_URL=${{Postgres.POSTGRES_PRISMA_URL}}
POSTGRES_URL_NON_POOLING=${{Postgres.POSTGRES_URL_NON_POOLING}}

# ============================================
# REDIS (Railway Redis Plugin)
# ============================================
REDIS_URL=${{Redis.REDIS_URL}}
REDIS_PRIVATE_URL=${{Redis.REDIS_PRIVATE_URL}}

# ============================================
# EXTERNAL SERVICES (Manual Configuration)
# ============================================

# CloudAMQP RabbitMQ
CLOUDAMQP_URL=amqps://username:password@hostname/vhost
RABBITMQ_URL=${{CLOUDAMQP_URL}}

# Stack Auth (Production)
STACK_AUTH_PROJECT_ID=your_stack_auth_project_id
STACK_AUTH_PUBLISHABLE_KEY=your_stack_auth_publishable_key
STACK_AUTH_SECRET_KEY=your_stack_auth_secret_key

# ============================================
# SECURITY SECRETS (Generate Random)
# ============================================
JWT_SECRET=your_secure_jwt_secret_32_chars_minimum
ENCRYPTION_KEY=your_encryption_key_32_chars_minimum
WA_BUSINESS_TOKEN_WEBHOOK=your_webhook_token_16_chars

# ============================================
# BACKEND API CONFIGURATION
# ============================================
NODE_ENV=production
PORT=3000

# API Configuration
WEBHOOK_BASE_URL=https://${{RAILWAY_PUBLIC_DOMAIN}}
CORS_ORIGIN=https://${{frontend.RAILWAY_PUBLIC_DOMAIN}}
ALLOWED_ORIGINS=https://${{frontend.RAILWAY_PUBLIC_DOMAIN}}

# Rate Limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# Evolution API Integration
EVOLUTION_API_BASE_URL=http://${{evolution-api.RAILWAY_PRIVATE_DOMAIN}}:8080
EVOLUTION_API_KEY=whatsapp_saas_evolution_prod_key_2024
EVOLUTION_API_TIMEOUT=30000

# ============================================
# BACKEND WORKER CONFIGURATION
# ============================================

# Queue Processing
WORKER_CONCURRENCY=5
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_MS=5000
DEAD_LETTER_TTL=86400000

# Worker Features
ENABLE_API_VALIDATION=true
ENABLE_REQUEST_LOGGING=true
PROCESSING_TIMEOUT=30000

# ============================================
# EVOLUTION API CONFIGURATION
# ============================================

# Authentication
AUTHENTICATION_API_KEY=whatsapp_saas_evolution_prod_key_2024

# Database Integration
DATABASE_ENABLED=true
DATABASE_CONNECTION_URI=${{Postgres.DATABASE_URL}}
DATABASE_CONNECTION_CLIENT_NAME=evolution_api_prod

# Redis Integration
REDIS_ENABLED=true
REDIS_URI=${{Redis.REDIS_URL}}
REDIS_PREFIX_KEY=evolution_api_prod

# Webhook Configuration
WEBHOOK_GLOBAL_URL=https://${{backend-api.RAILWAY_PUBLIC_DOMAIN}}/webhooks/evolution
WEBHOOK_GLOBAL_ENABLED=true
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=true

# Server Configuration
LOG_LEVEL=info
LOG_COLOR=false
SERVER_TYPE=http
SERVER_PORT=8080

# CORS Configuration
CORS_ORIGIN=https://${{frontend.RAILWAY_PUBLIC_DOMAIN}},https://${{backend-api.RAILWAY_PUBLIC_DOMAIN}}
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_CREDENTIALS=true

# ============================================
# FRONTEND CONFIGURATION
# ============================================

# Build Environment
NODE_ENV=production

# API Configuration
VITE_API_BASE_URL=https://${{backend-api.RAILWAY_PUBLIC_DOMAIN}}/api
VITE_API_URL=https://${{backend-api.RAILWAY_PUBLIC_DOMAIN}}
VITE_EVOLUTION_API_URL=https://${{evolution-api.RAILWAY_PUBLIC_DOMAIN}}

# Stack Auth (Frontend)
VITE_STACK_AUTH_PROJECT_ID=${{STACK_AUTH_PROJECT_ID}}
VITE_STACK_AUTH_PUBLISHABLE_KEY=${{STACK_AUTH_PUBLISHABLE_KEY}}

# App Configuration
VITE_APP_NAME=WhatsApp SaaS
VITE_APP_VERSION=1.0.0
VITE_APP_ENV=production

# ============================================
# META BUSINESS MANAGER (Manual Setup)
# ============================================

# Meta WhatsApp Cloud API
# Configure these in Meta Business Manager:
# - App ID: your_app_id
# - App Secret: your_app_secret  
# - Access Token: your_permanent_access_token
# - Phone Number ID: your_phone_number_id
# - Business Account ID: your_business_account_id
# - Webhook URL: https://backend-api-production.railway.app/webhooks/evolution
# - Webhook Verify Token: your_webhook_verify_token

# ============================================
# MONITORING & OBSERVABILITY
# ============================================

# Logging
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_LOGGING=true

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Health Checks
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=10000

# ============================================
# DEPLOYMENT CONFIGURATION
# ============================================

# Railway Deployment
RAILWAY_DEPLOYMENT_ID=your_deployment_id
RAILWAY_REPLICA_ID=your_replica_id

# Build Configuration
BUILD_ENV=production
SOURCE_COMMIT=your_git_commit_hash
SOURCE_BRANCH=main

# ============================================
# OPTIONAL INTEGRATIONS
# ============================================

# Email Service (Optional)
# SENDGRID_API_KEY=your_sendgrid_api_key
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password

# Storage Service (Optional)
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-s3-bucket

# Analytics (Optional)
# GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
# MIXPANEL_TOKEN=your_mixpanel_token

# Error Tracking (Optional)  
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# IMPORTANT NOTES
# ============================================

# 1. Railway variables are automatically injected
# 2. Use ${{service.VARIABLE}} for inter-service communication
# 3. Never commit actual secrets to git
# 4. Use Railway CLI to set production variables:
#    railway variables set VARIABLE_NAME=value --service service-name
# 5. Test all variables after deployment
# 6. Monitor logs for missing variables